<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تایمر ارزشمندی زمان</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;500;700&display=swap');
    
    :root {
      --primary: #00b894;
      --warning: #ff7675;
      --critical: #d63031;
      --bg: #1a1a1a;
      --text: #f5f6fa;
    }
    
    body {
      font-family: 'Vazirmatn', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    
    #timer {
      text-align: center;
      width: 90%;
      max-width: 300px;
    }
    
    #countdown {
      font-size: 3.2rem;
      font-weight: 300;
      letter-spacing: 2px;
      margin: 1.5rem 0;
      color: var(--primary);
      font-variant-numeric: tabular-nums;
    }
    
    .warning {
      color: var(--warning);
    }
    
    .critical {
      color: var(--critical);
      animation: pulse 1s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }
    
    #progress-container {
      margin: 2rem 0;
    }
    
    #progress-bar {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 3px;
      overflow: hidden;
    }
    
    #progress-fill {
      height: 100%;
      width: 100%;
      background: var(--primary);
      transition: width 1s linear;
    }
    
    #message {
      font-size: 1rem;
      line-height: 1.7;
      margin-top: 2rem;
      opacity: 0.9;
      min-height: 50px;
    }
  </style>
</head>
<body>
  <div id="timer">
    <div id="countdown">22:22:00</div>
    
    <div id="progress-container">
      <div id="progress-bar">
        <div id="progress-fill"></div>
      </div>
    </div>
    
    <div id="message">"این لحظه برای همیشه می‌رود..."</div>
  </div>

  <script>
    // عناصر DOM
    const countdownEl = document.getElementById('countdown');
    const progressFill = document.getElementById('progress-fill');
    const messageEl = document.getElementById('message');
    
    // پیام‌های کوتاه و تاثیرگذار با ترجمه روان
    const messages = [
      "قطره‌های زمان می‌روند...",
      "این ثانیه را دریاب",
      "فرصت مانند باد می‌گذرد",
      "زمان درحال عبور است",
      "لحظه‌ات را آگاهانه زندگی کن",
      "هر نفس یک فرصت است",
      "حالا بهترین زمان است",
      "زمان مانند آب روان است"
    ];
    
    // تایمر اصلی
    function updateTimer() {
      const now = new Date();
      const tehranOffset = 3.5 * 60 * 60 * 1000; // UTC+3:30
      const localOffset = now.getTimezoneOffset() * 60 * 1000;
      const tehranNow = new Date(now.getTime() + localOffset + tehranOffset);
      
      // زمان هدف 22:22
      const targetTime = new Date(tehranNow);
      targetTime.setHours(22, 22, 0, 0);
      if (tehranNow >= targetTime) {
        targetTime.setDate(targetTime.getDate() + 1);
      }
      
      const diff = targetTime - tehranNow;
      const totalSeconds = Math.floor(diff / 1000);
      
      // محاسبه زمان باقیمانده
      const hours = Math.floor(totalSeconds / 3600);
      const mins = Math.floor((totalSeconds % 3600) / 60);
      const secs = totalSeconds % 60;
      
      // نمایش تایمر
      countdownEl.textContent = 
        `${String(hours).padStart(2, '0')}:${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
      
      // محاسبه درصد پیشرفت (معکوس برای خالی شدن)
      const totalDaySeconds = 24 * 3600;
      const percentRemaining = (totalSeconds / totalDaySeconds) * 100;
      progressFill.style.width = `${percentRemaining}%`;
      
      // تغییر حالت‌های هشدار
      if (hours < 1) {
        // حالت اضطراری (کمتر از 1 ساعت)
        countdownEl.classList.add('critical');
        countdownEl.classList.remove('warning');
        progressFill.style.background = "var(--critical)";
        
        // تغییر پیام هر 30 ثانیه
        if (secs % 30 === 0) {
          showRandomMessage();
        }
      } 
      else if (hours < 3) {
        // حالت هشدار (کمتر از 3 ساعت)
        countdownEl.classList.add('warning');
        countdownEl.classList.remove('critical');
        progressFill.style.background = "var(--warning)";
        
        // تغییر پیام هر 2 دقیقه
        if (mins % 2 === 0 && secs === 0) {
          showRandomMessage();
        }
      } 
      else {
        // حالت عادی
        countdownEl.classList.remove('warning', 'critical');
        progressFill.style.background = "var(--primary)";
        
        // تغییر پیام هر 5 دقیقه
        if (mins % 5 === 0 && secs === 0) {
          showRandomMessage();
        }
      }
    }
    
    // نمایش پیام تصادفی
    function showRandomMessage() {
      const randomMsg = messages[Math.floor(Math.random() * messages.length)];
      messageEl.textContent = `"${randomMsg}"`;
      
      // افکت ساده
      messageEl.style.opacity = 0;
      setTimeout(() => {
        messageEl.style.opacity = 1;
        messageEl.style.transition = 'opacity 0.5s ease';
      }, 100);
    }
    
    // راه‌اندازی
    updateTimer();
    setInterval(updateTimer, 1000);
    
    // نمایش اولین پیام
    setTimeout(showRandomMessage, 1000);
  </script>
</body>
</html>
